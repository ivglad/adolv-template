@use '@/assets/styles/variables' as *;
@use '@/assets/styles/mixins' as *;

@layer app {
  .app-input {
    position: relative;
    display: flex;
    &:has(input:focus) &-message {
      opacity: 0;
      pointer-events: none;
    }
    &:has(input:not(:focus)):has(&-message.p-message-error) {
      label {
        opacity: 0;
      }
    }
    &-message {
      @include transition;
      position: absolute;
      inset: 2px;
      padding-block: var(--p-inputtext-padding-y);
      padding-inline: var(--p-inputtext-padding-x);
      padding-inline-start: calc(var(--p-inputtext-padding-x) + 1px);
      padding-inline-end: calc(var(--p-inputtext-padding-x) * 2);
      user-select: none;
      pointer-events: none;
      background: var(--p-inputtext-background);
      z-index: 1;
      .p-message-text {
        line-height: 1;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
      }
    }
    &-mask,
    &-help {
      flex-direction: column;
      gap: 0.2rem;
    }
    &-button {
      padding: 0;
    }
  }

  .app-checkbox,
  .app-radio {
    label {
      display: flex;
      align-items: center;
      .p-disabled + .app-checkbox-label,
      .p-disabled + .app-radio-label {
        opacity: 0.4;
        filter: grayscale(0.9);
        user-select: none;
        pointer-events: none;
      }
    }
    &-label {
      padding-left: 1rem;
      color: inherit;
      cursor: pointer;
      user-select: none;
    }
  }

  .app-multiselect-extended {
    &-overlay {
      background: color-mix(
        in srgb,
        var(--p-surface-100),
        var(--p-surface-0) 50%
      );
      .p-multiselect {
        &-list {
          gap: 1rem;
          padding-right: 0;
        }
        &-option {
          align-items: start;
          gap: 1rem;
          margin-left: 0.75rem;
          border-radius: var(--p-border-radius-lg);
          &:not(&-selected):not(.p-disabled):not(.p-focus) {
            background: var(--p-surface-0);
          }
          .option-content {
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 300px;
            &-info {
              display: flex;
              justify-content: space-between;
              margin-top: 1rem;
            }
            span {
              text-wrap: wrap;
            }
          }
        }
      }
    }
  }

  .app-chip {
    gap: 0.2rem;
    &-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 2.5rem;
      height: 2.5rem;
      min-width: 2.5rem;
      min-height: 2.5rem;
      line-height: 2.5rem;
      font-size: 1.2rem;
      color: var(--p-primary-contrast-color);
      background-color: var(--p-surface-500);
      border-radius: 10rem;
      user-select: none;
    }
  }

  .app-fileupload {
    &-file {
      display: flex;
      align-items: start;
      gap: 1rem;
      &-name {
        max-width: 25rem;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
      }
      &-info {
        display: flex;
        flex-direction: column;
      }
      .p-button-icon-only {
        width: min-content;
        height: min-content;
        min-width: min-content;
        min-height: min-content;
        padding: 0;
        margin: 0 0 0 auto;
        border: none;
      }
    }
  }

  .app-confirm {
    &-modified {
      border-color: var(--p-primary-950);
      background-color: var(--p-primary-950);
      .p-dialog {
        &-header {
          color: var(--p-surface-50);
        }
        &-content {
          max-width: 20rem;
          color: var(--p-surface-50);
        }
      }
    }
  }

  .app-dialog {
    width: 50%;
  }

  .app-drawer {
    width: 30rem;
    .p-drawer {
      &-footer {
        display: flex;
        justify-content: flex-end;
        gap: 1rem;
      }
    }
  }

  .app-popover {
    .p-popover {
      &-content {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }
    }
    &-element {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem 1rem;
      border-radius: var(--p-border-radius-lg);
      @include active {
        background: var(--p-surface-100);
      }
    }
  }

  .app-card {
    width: 30rem;
    overflow: hidden;
    .p-card {
      &-header {
        padding: var(--p-select-option-padding);
      }
      &-footer {
        display: flex;
        justify-content: end;
        gap: 1rem;
      }
    }
    &-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      width: 100%;
      padding: var(--p-select-option-padding);
      cursor: pointer;
      .icon {
        font-size: 1.4rem;
      }
    }
  }

  .app-stepper {
    &-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 2rem;
    }
  }

  .app-toast {
    flex-direction: column;
    &-summary {
      display: flex;
      align-items: center;
      gap: var(--p-toast-content-gap);
    }
  }

  .app-progressspinner-inside {
    position: absolute;
    top: 50%;
    right: var(--p-inputtext-padding-x);
    width: 2.5rem;
    height: 2.5rem;
    transform: translateY(-50%);
  }

  .app-carousel {
    .p-carousel {
      &-item {
        & > * {
          width: auto;
          height: calc(100% - 1rem);
          margin: 0.5rem;
        }
      }
    }
  }
}
